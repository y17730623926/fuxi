<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="./插件/jQuery1.12.4.js"></script>
    <style>
        * {
            padding: 0;
            margin: 0;
        }
        tr {
            width: 100%;
        }
        th,
        td {
            width: 20%;
            text-align: center;
            font-size: 18px;
        }
        .create {
            display: none;
        }
    </style>
</head>

<body>
    <table class="table table-hover">
        <thead>
            <tr>
                <th>车辆</th>
                <th>起始地</th>
                <th>目的地</th>
                <th>时间</th>
                <th>操作</th>
            </tr>
            <tr class="create">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
            <tr>
                <td>子弹头</td>
                <td>地球</td>
                <td>月球</td>
                <td>2000.12.15</td>
                <td>
                    <button class="btn btn-success">添加</button>
                    <button class="btn btn-warning">删除</button>
                </td>
            </tr>
        </tbody>
    </table>
    <script>
        // (function () {
        //     //获取tbody
        //     var tbody = document.querySelector("tbody");
        //     //获取添加模板
        //     var mb_tr = document.querySelector(".create");
        //     tbody.onclick = function (e) {
        //         var _this = e.target;
                
        //         if (_this.nodeName === "TD" && _this.children.length === 0) {
        //             //创建一个input
        //             var input = document.createElement("input");
        //             input.type = "text";
        //             //获取清除之前的txt文本
        //             var txt = _this.innerText;
        //             //清除添加之前的txt文本
        //             _this.innerText = "";
        //             //添加清除之前的文本到input里面
        //             input.value = txt;
        //             //增加input进去td里面
        //             _this.appendChild(input);
        //             //添加进去之后直接获取焦点，debug
        //             input.focus();
        //             //存储点击的 td 的 this , 失去焦点时要用
        //             input.onblur = function () {
        //                 //存储失去焦点时input的value
        //                 var td_txt = input.value;
        //                 //修改td的内容
        //                 _this.innerText = td_txt;
        //             }
        //         }
        //         //添加
        //         if (_this.nodeName === "BUTTON" && _this.className === "btn btn-success") {
        //             var mb_tr_cope = mb_tr.cloneNode(true); //克隆
        //             mb_tr_cope.className = "";
        //             //在tbody里面添加一个新的克隆的tr模板，在点击的tr的下一个兄弟级之前添加进去
        //             tbody.insertBefore(mb_tr_cope,_this.parentNode.parentNode.nextElementSibling);
        //         }
        //         //删除
        //         if (_this.nodeName === "BUTTON" && _this.className === "btn btn-warning") {
        //             tbody.removeChild(_this.parentNode.parentNode);     //删除点击的按钮的tr这一行
        //         }
        //     }
        // })();

        //jQuery
        // (function () {
        //     var mb_tr = $(".create");
        //     $('tbody').click(function (e) {
        //         var _this = $(e.target);
        //         console.log(_this.is("td"));
        //         if (_this.is("td") && _this.children().length === 0) {
        //             var input = $("<input type='text'>").val(_this.text());
        //             _this.text("").append(input);
        //             input.focus().blur(function () {
        //                 _this.text($(this).val());
        //             });
        //         }
        //         if (_this.hasClass("btn btn-warning")){
        //             _this.closest("tr").remove();
        //         }
        //         if (_this.hasClass("btn btn-success")) {
        //             var mb_tr_cope = mb_tr.clone(true).removeAttr("class");
        //             _this.closest("tr").after(mb_tr_cope);
        //         }
        //     });
        // })();
        (function () {
            $("").click(function (e) {
                var _this = $(e.target);
                console.log(_this.is("td"));
                if (_this.is("td") && _this.children().length === 0) {
                    var input = $("<input type='text'>").val(_this.text());
                    _this.text("").append(input);
                    input.focus().blur(function () {
                        _this.text($(this).val());
                    });
                }
                if (_this.hasClass("btn btn-warning")){
                    _this.closest("tr").remove();
                }    
                if (_this.hasClass("btn btn-success")) {
                    var mb_tr_cope = mb_tr.clone(true).removeAttr("class");
                    _this.closest("tr").after(mb_tr_cope);
                }
            });
        })();
    </script>
</body>

</html>